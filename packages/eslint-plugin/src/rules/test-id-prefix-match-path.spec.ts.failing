// This test almost works
// eslint isn't being pulled in and configure correctly to run it yet

"use strict";

const rule = require("./test-id-prefix-match-path"),
  RuleTester = require("eslint").RuleTester;

const ruleTester = new RuleTester();

const testCode = (prefix: string) => `
const testIds = createTestIds("${prefix}"), [
    "wrapper",
    "title",
    "buttonLeft",
    "buttonRight"
  ]);
`;

ruleTester.run("test-id-prefix-match-path", rule, {
  valid: [
    {
      code: testCode("components-atoms-button"),
      filename: "src/components/atoms/button/index.tsx",
      errors: [{ message: "Test ID prefix name is invalid" }],
    },
  ],

  invalid: [
    {
      code: testCode("prefix"),
      filename: "src/components/atoms/button/index.tsx",
      errors: [{ message: "Test ID prefix name is invalid" }],
    },
  ],
});
